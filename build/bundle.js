(()=>{"use strict";function a(d){var e=c[d];if(void 0!==e)return e.exports;var f=c[d]={exports:{}};return b[d](f,f.exports,a),f.exports}var b={"./src/index.js":/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/(a,b,c)=>{c.r(b);var d=c(/*! ./tictactoe */"./src/tictactoe.js"),e=c(/*! ./sass/main.scss */"./src/sass/main.scss");(function(){window.addEventListener("scroll",function(){document.querySelector("header").style.opacity=document.documentElement.scrollTop>150?0:1});var a=document.getElementById("sword-logo"),b=document.getElementById("facebook"),c=document.getElementById("twitter"),e=document.getElementById("instagram"),f=document.getElementById("send");a.src="./assets/img/SWORD_Health_logo.svg",b.src="./assets/img/facebook.svg",c.src="./assets/img/twitter.svg",e.src="./assets/img/instagram.svg",f.src="./assets/img/send.svg";var g=document.getElementById("select-grid-size");g.addEventListener("change",function(a){try{document.getElementById("game-area").style.visibility="visible";var b=new d.TicTacToe(+a.target.value);b.onInit()}catch(a){console.error(a)}})}).call()},"./src/swordgames.js":/*!***************************!*\
  !*** ./src/swordgames.js ***!
  \***************************/(a,b,c)=>{function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function f(a,b,c){return b&&e(a.prototype,b),c&&e(a,c),a}c.r(b),c.d(b,{SwordGames:()=>g});var g=function(){function a(){d(this,a),this.game="tictactoe",this.player="1",this.boardStatus=[],this.winningConditions=[],this.roundWinsByPlayer={player1:0,player2:0}}return f(a,[{key:"onInit",value:function(){throw"NotImplementedException"}},{key:"buildBoard",value:function(){throw"NotImplementedException"}},{key:"setEventListeners",value:function(){throw"NotImplementedException"}},{key:"onDestroy",value:function(){if("tictactoe"===this.game)for(var a=document.querySelectorAll(".flex-item"),b=a.length,c=0;c<b;c++)a[c].removeEventListener(this.onCellClicked)}},{key:"highlightSelectedPlayer",value:function(){var a=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];return a?void(document.getElementById("player1").classList.add("current-player"),document.getElementById("player2").classList.remove("current-player")):(document.getElementById("player1").classList.toogle("current-player"),void document.getElementById("player2").classList.toogle("current-player"))}}]),a}()},"./src/tictactoe.js":/*!**************************!*\
  !*** ./src/tictactoe.js ***!
  \**************************/(a,b,c)=>{function d(a){"@babel/helpers - typeof";return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d(a)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function g(a,b,c){return b&&f(a.prototype,b),c&&f(a,c),a}function h(a,b,c){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,b,c){var d=i(a,b);if(d){var e=Object.getOwnPropertyDescriptor(d,b);return e.get?e.get.call(c):e.value}},h(a,b,c||a)}function i(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=p(a),null!==a););return a}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&k(a,b)}function k(a,b){return k=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},k(a,b)}function l(a){var b=o();return function(){var c,d=p(a);if(b){var e=p(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return m(this,c)}}function m(a,b){return b&&("object"===d(b)||"function"==typeof b)?b:n(a)}function n(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function p(a){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},p(a)}c.r(b),c.d(b,{TicTacToe:()=>r});var q=c(/*! ./swordgames */"./src/swordgames.js"),r=function(a){function b(){var a,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;return e(this,b),a=c.call(this),a.boardSize=d,a}j(b,a);var c=l(b);return g(b,[{key:"onInit",value:function(){var a=this;this.winningConditions=Array.from({length:2*this.boardSize+2},function(){return Array(a.boardSize)}),this.boardStatus=Array(this.boardSize*this.boardSize).fill(""),this.buildRows(),this.buildCols(),this.buildLtrDiag(),this.buildRtrDiag(),this.buildBoard(),this.setEventListeners(),h(p(b.prototype),"highlightSelectedPlayer",this).call(this)}},{key:"buildRows",value:function(){for(var a=-1,b=0;b<this.boardSize;b++)for(var c=0;c<this.boardSize;c++)++a,this.winningConditions[b][c]=a}},{key:"buildCols",value:function(){for(var a=-1,b=this.winningConditions.length,c=0;c<this.boardSize;c++)for(var d=this.boardSize;d<=b-3;d++)++a,this.winningConditions[d][c]=a}},{key:"buildLtrDiag",value:function(){for(var a=this.winningConditions.length,b=0;b<this.boardSize;b++)this.winningConditions[a-2][b]=b*(this.boardSize+1)}},{key:"buildRtrDiag",value:function(){for(var b=this.boardSize-1,a=this.winningConditions.length,c=0;c<this.boardSize;c++)this.winningConditions[a-1][c]=c*b+b}},{key:"buildBoard",value:function(){for(var a=document.querySelector("#board"),b="",c=-1,d=0;d<this.boardSize;d++){b+="<div class=\"flex-container\">";for(var e=0;e<this.boardSize;e++)++c,b+="<div class=\"flex-item\" data-cell-id=\"".concat(c,"\"></div>");b+="</div>"}a.innerHTML=b}},{key:"setEventListeners",value:function(){for(var a=document.querySelectorAll(".flex-item"),b=a.length,c=0;c<b;c++)a[c].addEventListener("click",this.onCellClicked.bind(this))}},{key:"onCellClicked",value:function(a){try{var b=+a.target.dataset.cellId;if(console.debug("on cell clicked",this.dataset),""!==this.boardStatus[b])return;this.cellPlayedHandler(a.target,b)}catch(a){console.error(a)}}},{key:"cellPlayedHandler",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1;if(!a||-1===b)throw"InvalidCellException";a.classList.add("1"===this.player?"player1":"player2"),this.boardStatus[b]=this.player,this.checkWin()}},{key:"checkWin",value:function(){for(var a,b=this,c=!1,d=!1,e=this.winningConditions.length,f=null,g=function(a){f=b.winningConditions[a];for(var d=[],e=0;e<b.boardSize;e++)d.push(b.boardStatus[f[e]]);return d.some(function(a){return""===a})?"continue":d.every(function(a){return a===d[0]})?(c=!0,"break"):void 0},h=0;h<e&&(a=g(h),"continue"===a||"break"!==a);h++);if(c){for(var i=0;i<this.boardSize;i++){var j=f[i],k=document.querySelector("[data-cell-id=\"".concat(j,"\"]"));k.classList.add("player".concat(this.player,"Win"),"winning-cell"),k.classList.remove("player".concat(this.player)),setTimeout(function(){b.restartGame()},4e3)}return this.roundWinsByPlayer["player"+this.player]+=1,void(5!==this.roundWinsByPlayer.player1&&5!==this.roundWinsByPlayer.player2)}return d=!this.boardStatus.includes(""),d?void this.restartGame():void this.managePlayerChange()}},{key:"managePlayerChange",value:function(){this.player="1"===this.player?"2":"1",h(p(b.prototype),"highlightSelectedPlayer",this).call(this)}},{key:"restartGame",value:function(){this.player="1",this.boardStatus.fill("");for(var a=document.querySelectorAll(".flex-item"),b=a.length,c=["player1","player2","player1Win","player2Win","winning-cell"],d=0;d<b;d++){var e;(e=a[d].classList).remove.apply(e,c)}}}]),b}(q.SwordGames)},"./src/sass/main.scss":/*!****************************!*\
  !*** ./src/sass/main.scss ***!
  \****************************/(a,b,c)=>{c.r(b)}},c={};(()=>{a.d=(b,c)=>{for(var d in c)a.o(c,d)&&!a.o(b,d)&&Object.defineProperty(b,d,{enumerable:!0,get:c[d]})}})(),(()=>{a.o=(a,b)=>Object.prototype.hasOwnProperty.call(a,b)})(),(()=>{a.r=(a)=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}})(),a("./src/index.js");a("./src/sass/main.scss")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zd29yZGdhbWVzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3N3b3JkZ2FtZXMvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc3dvcmRnYW1lcy8uL3NyYy9zd29yZGdhbWVzLmpzIiwid2VicGFjazovL3N3b3JkZ2FtZXMvLi9zcmMvdGljdGFjdG9lLmpzIiwid2VicGFjazovL3N3b3JkZ2FtZXMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3N3b3JkZ2FtZXMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9zd29yZGdhbWVzL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vc3dvcmRnYW1lcy93ZWJwYWNrL3N0YXJ0dXAiXSwibmFtZXMiOlsid2luZG93IiwiZG9jdW1lbnQiLCJsb2dvIiwiZmFjZWJvb2siLCJ0d2l0dGVyIiwiaW5zdGFncmFtIiwic2VuZCIsImdyaWRTaXplIiwidGljVGFjVG9lIiwiVGljVGFjVG9lIiwiZXYiLCJjb25zb2xlIiwicGxheWVyMSIsInBsYXllcjIiLCJib2FyZENlbGxzIiwiYm9hcmRDZWxsc0xlbmd0aCIsImkiLCJpc0luaXRpYWxpemF0aW9uIiwiYm9hcmRTaXplIiwibGVuZ3RoIiwicm93QWNjdW11bGF0b3IiLCJyb3ciLCJjb2xBY2N1bXVsYXRvciIsIndpbm5pbmdDb25kaXRpb25zTGVuZ3RoIiwiY29sIiwiYSIsImJvYXJkQ29udGFpbmVyIiwiYm9hcmQiLCJjb3VudGVyIiwiaiIsImNsaWNrZWRDZWxsIiwiY2VsbCIsImNlbGxJbmRleCIsIndpbm5pbmdDb25kaXRpb24iLCJ0ZXN0IiwiZWxlbSIsInZpY3RvcnkiLCJjZWxsSWQiLCJib2FyZENlbGwiLCJzZXRUaW1lb3V0IiwiZHJhdyIsImFwcGxpZWRDbGFzc2VzIiwiU3dvcmRHYW1lcyJd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QUEsWUFDQSxlQUNBLG1CQURBLEVBRUEsMkJBQXdDLGFBQXhDLENBQXdDLFFBQXhDLEVBR0EsQyxXQ1BBLG9ELFdDQ0EsVUFDQSw4Q0FEQSxFQUVBLDRDQUFzRCxjQUF0RCxFQUZBLENBSUEsc0NBQStDLFFBQS9DLEVBQ0EsQyxLQ0pBLG1CLENBRUEseUIiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsImltcG9ydCB7VGljVGFjVG9lfSBmcm9tICcuL3RpY3RhY3RvZSc7XHJcbmltcG9ydCAnLi9zYXNzL21haW4uc2Nzcyc7XHJcblxyXG4oZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoKSA9PiB7XHJcbiAgICAgICAgbGV0IGxpbWl0ID0gMTUwO1xyXG5cclxuICAgICAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA+IGxpbWl0KSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpLnN0eWxlLm9wYWNpdHkgPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpLnN0eWxlLm9wYWNpdHkgPSAxO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGxldCBsb2dvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N3b3JkLWxvZ28nKSxcclxuICAgICAgICBmYWNlYm9vayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmYWNlYm9vaycpLFxyXG4gICAgICAgIHR3aXR0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHdpdHRlcicpLFxyXG4gICAgICAgIGluc3RhZ3JhbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnN0YWdyYW0nKSxcclxuICAgICAgICBzZW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbmQnKTtcclxuXHJcbiAgICBsb2dvLnNyYyA9ICcuL2Fzc2V0cy9pbWcvU1dPUkRfSGVhbHRoX2xvZ28uc3ZnJztcclxuICAgIGZhY2Vib29rLnNyYyA9ICcuL2Fzc2V0cy9pbWcvZmFjZWJvb2suc3ZnJztcclxuICAgIHR3aXR0ZXIuc3JjID0gJy4vYXNzZXRzL2ltZy90d2l0dGVyLnN2Zyc7XHJcbiAgICBpbnN0YWdyYW0uc3JjID0gJy4vYXNzZXRzL2ltZy9pbnN0YWdyYW0uc3ZnJztcclxuICAgIHNlbmQuc3JjID0gJy4vYXNzZXRzL2ltZy9zZW5kLnN2Zyc7XHJcblxyXG4gICAgbGV0IGdyaWRTaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdC1ncmlkLXNpemUnKTtcclxuICAgIGdyaWRTaXplLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGV2ID0+IHtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtYXJlYScpLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XHJcbiAgICAgICAgICAgIGxldCB0aWNUYWNUb2UgPSBuZXcgVGljVGFjVG9lKCtldi50YXJnZXQudmFsdWUpO1xyXG4gICAgICAgICAgICB0aWNUYWNUb2Uub25Jbml0KCk7XHJcbiAgICAgICAgfSBjYXRjaChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBcclxufSkuY2FsbCgpO1xyXG4iLCJleHBvcnQgY2xhc3MgU3dvcmRHYW1lcyB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLmdhbWUgPSBcInRpY3RhY3RvZVwiO1xyXG5cdFx0dGhpcy5wbGF5ZXIgPSAnMSc7XHJcblx0XHR0aGlzLmJvYXJkU3RhdHVzID0gW107XHJcblx0XHR0aGlzLndpbm5pbmdDb25kaXRpb25zID0gW107XHJcblx0XHR0aGlzLnJvdW5kV2luc0J5UGxheWVyID0ge1xyXG4gICAgICAgICAgICBwbGF5ZXIxOiAwLFxyXG4gICAgICAgICAgICBwbGF5ZXIyOiAwXHJcbiAgICAgICAgfTtcclxuXHRcdC8qIHRoaXMuc3RhdGlzdGljcyA9IHtcclxuXHJcblx0XHR9ICovXHJcblx0fVxyXG5cclxuXHRvbkluaXQoKSB7XHJcblx0XHR0aHJvdygnTm90SW1wbGVtZW50ZWRFeGNlcHRpb24nKTtcdFxyXG5cdH1cclxuXHJcblx0YnVpbGRCb2FyZCgpIHtcclxuXHRcdHRocm93KCdOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbicpO1x0XHJcblx0fVxyXG5cclxuXHRzZXRFdmVudExpc3RlbmVycygpIHtcclxuXHRcdHRocm93KCdOb3RJbXBsZW1lbnRlZEV4Y2VwdGlvbicpO1x0XHJcblx0fVxyXG5cclxuXHRvbkRlc3Ryb3koKSB7XHJcblx0XHRpZiAodGhpcy5nYW1lID09PSAndGljdGFjdG9lJykge1xyXG5cdFx0XHRsZXQgYm9hcmRDZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mbGV4LWl0ZW0nKSxcclxuXHRcdFx0XHRib2FyZENlbGxzTGVuZ3RoID0gYm9hcmRDZWxscy5sZW5ndGg7XHJcblxyXG5cdFx0XHRmb3IobGV0IGkgPSAwOyBpIDwgYm9hcmRDZWxsc0xlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0Ym9hcmRDZWxsc1tpXS5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMub25DZWxsQ2xpY2tlZCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGhpZ2hsaWdodFNlbGVjdGVkUGxheWVyKGlzSW5pdGlhbGl6YXRpb24gPSBmYWxzZSkge1xyXG5cclxuXHRcdGlmICghaXNJbml0aWFsaXphdGlvbikge1xyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyMScpLmNsYXNzTGlzdC50b29nbGUoJ2N1cnJlbnQtcGxheWVyJyk7XHJcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5ZXIyJykuY2xhc3NMaXN0LnRvb2dsZSgnY3VycmVudC1wbGF5ZXInKTtcclxuXHRcdFx0cmV0dXJuO1x0XHJcblx0XHR9XHJcblxyXG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllcjEnKS5jbGFzc0xpc3QuYWRkKCdjdXJyZW50LXBsYXllcicpO1xyXG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllcjInKS5jbGFzc0xpc3QucmVtb3ZlKCdjdXJyZW50LXBsYXllcicpO1xyXG5cdFx0LyogaWYgKHRoaXMucGxheWVyID09PSAnMScpIHtcclxuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllcjEnKS5jbGFzc0xpc3QuYWRkKCdjdXJyZW50LXBsYXllcicpO1xyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyMicpLmNsYXNzTGlzdC5yZW1vdmUoJ2N1cnJlbnQtcGxheWVyJyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyMicpLmNsYXNzTGlzdC5hZGQoJ2N1cnJlbnQtcGxheWVyJyk7XHJcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5ZXIxJykuY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudC1wbGF5ZXInKTtcclxuXHRcdH0gKi9cclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHtTd29yZEdhbWVzfSBmcm9tICcuL3N3b3JkZ2FtZXMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRpY1RhY1RvZSBleHRlbmRzIFN3b3JkR2FtZXMge1xyXG4gICAgY29uc3RydWN0b3IoYm9hcmRTaXplID0gMykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5ib2FyZFNpemUgPSBib2FyZFNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgb25Jbml0KCkge1xyXG4gICAgICAgIHRoaXMud2lubmluZ0NvbmRpdGlvbnMgPSBBcnJheS5mcm9tKHtcclxuICAgICAgICAgICAgbGVuZ3RoOiAodGhpcy5ib2FyZFNpemUgKiAyKSArIDJcclxuICAgICAgICB9LCAoKSA9PiAobmV3IEFycmF5KHRoaXMuYm9hcmRTaXplKSkpO1xyXG5cclxuICAgICAgICB0aGlzLmJvYXJkU3RhdHVzID0gbmV3IEFycmF5KHRoaXMuYm9hcmRTaXplICogdGhpcy5ib2FyZFNpemUpLmZpbGwoJycpO1xyXG5cclxuICAgICAgICB0aGlzLmJ1aWxkUm93cygpO1xyXG4gICAgICAgIHRoaXMuYnVpbGRDb2xzKCk7XHJcbiAgICAgICAgdGhpcy5idWlsZEx0ckRpYWcoKTtcclxuICAgICAgICB0aGlzLmJ1aWxkUnRyRGlhZygpO1xyXG5cclxuICAgICAgICB0aGlzLmJ1aWxkQm9hcmQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICBzdXBlci5oaWdobGlnaHRTZWxlY3RlZFBsYXllcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkUm93cygpIHtcclxuICAgICAgICBsZXQgcm93QWNjdW11bGF0b3IgPSAtMTtcclxuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCB0aGlzLmJvYXJkU2l6ZTsgcm93KyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJvYXJkU2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICArK3Jvd0FjY3VtdWxhdG9yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53aW5uaW5nQ29uZGl0aW9uc1tyb3ddW2ldID0gcm93QWNjdW11bGF0b3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYnVpbGRDb2xzKCkge1xyXG4gICAgICAgIGxldCBjb2xBY2N1bXVsYXRvciA9IC0xLFxyXG4gICAgICAgICAgICB3aW5uaW5nQ29uZGl0aW9uc0xlbmd0aCA9IHRoaXMud2lubmluZ0NvbmRpdGlvbnMubGVuZ3RoO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ib2FyZFNpemU7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBjb2wgPSB0aGlzLmJvYXJkU2l6ZTsgY29sIDw9IHdpbm5pbmdDb25kaXRpb25zTGVuZ3RoIC0gMzsgY29sKyspIHtcclxuICAgICAgICAgICAgICAgICsrY29sQWNjdW11bGF0b3I7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpbm5pbmdDb25kaXRpb25zW2NvbF1baV0gPSBjb2xBY2N1bXVsYXRvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBidWlsZEx0ckRpYWcoKSB7XHJcbiAgICAgICAgbGV0IHdpbm5pbmdDb25kaXRpb25zTGVuZ3RoID0gdGhpcy53aW5uaW5nQ29uZGl0aW9ucy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJvYXJkU2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2lubmluZ0NvbmRpdGlvbnNbd2lubmluZ0NvbmRpdGlvbnNMZW5ndGggLSAyXVtpXSA9IGkgKiAodGhpcy5ib2FyZFNpemUgKyAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYnVpbGRSdHJEaWFnKCkge1xyXG4gICAgICAgIGxldCBhID0gdGhpcy5ib2FyZFNpemUgLSAxLFxyXG4gICAgICAgICAgICB3aW5uaW5nQ29uZGl0aW9uc0xlbmd0aCA9IHRoaXMud2lubmluZ0NvbmRpdGlvbnMubGVuZ3RoO1xyXG5cdCAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYm9hcmRTaXplOyBpKyspIHtcclxuICBcdCAgICAgICAgdGhpcy53aW5uaW5nQ29uZGl0aW9uc1t3aW5uaW5nQ29uZGl0aW9uc0xlbmd0aCAtIDFdW2ldID0gKGkgKiBhKSArIGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkQm9hcmQoKSB7XHJcbiAgICAgICAgbGV0IGJvYXJkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JvYXJkJyksXHJcbiAgICAgICAgICAgIGJvYXJkID0gJycsXHJcbiAgICAgICAgICAgIGNvdW50ZXIgPSAtMTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJvYXJkU2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGJvYXJkICs9ICc8ZGl2IGNsYXNzPVwiZmxleC1jb250YWluZXJcIj4nO1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgdGhpcy5ib2FyZFNpemU7IGorKykge1xyXG4gICAgICAgICAgICAgICAgKytjb3VudGVyO1xyXG4gICAgICAgICAgICAgICAgYm9hcmQgKz0gYDxkaXYgY2xhc3M9XCJmbGV4LWl0ZW1cIiBkYXRhLWNlbGwtaWQ9XCIke2NvdW50ZXJ9XCI+PC9kaXY+YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBib2FyZCArPSAnPC9kaXY+JztcclxuICAgICAgICB9XHJcbiAgICAgICAgYm9hcmRDb250YWluZXIuaW5uZXJIVE1MID0gYm9hcmQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgbGV0IGJvYXJkQ2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmxleC1pdGVtJyksXHJcbiAgICAgICAgICAgIGJvYXJkQ2VsbHNMZW5ndGggPSBib2FyZENlbGxzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2FyZENlbGxzTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYm9hcmRDZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DZWxsQ2xpY2tlZC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYW5hZ2UgYm9hcmQgY2VsbCBjbGlja3MuIElmIGNlbGwgYWxyZWFkeSBjbGlja2VkIGRvbnQgYWxsb3cgYSBtb3ZlIG9uIHRoYXQgY2VsbFxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGV2IFxyXG4gICAgICogQHJldHVybnMgXHJcbiAgICAgKi9cclxuICAgIG9uQ2VsbENsaWNrZWQoZXYpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgY2xpY2tlZENlbGwgPSArZXYudGFyZ2V0LmRhdGFzZXQuY2VsbElkO1xyXG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdvbiBjZWxsIGNsaWNrZWQnLCB0aGlzLmRhdGFzZXQpO1xyXG5cclxuICAgICAgICAgICAgLy8gY2tlY2sgaWYgY2VsbCBpcyBhdmFpbGFibGVcclxuICAgICAgICAgICAgaWYgKHRoaXMuYm9hcmRTdGF0dXNbY2xpY2tlZENlbGxdICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNlbGxQbGF5ZWRIYW5kbGVyKGV2LnRhcmdldCwgY2xpY2tlZENlbGwpO1xyXG4gICAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGNlbGwgXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY2VsbEluZGV4IFxyXG4gICAgICovXHJcbiAgICBjZWxsUGxheWVkSGFuZGxlcihjZWxsID0gbnVsbCwgY2VsbEluZGV4ID0gLTEpIHtcclxuICAgICAgICBpZiAoIWNlbGwgfHwgY2VsbEluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICB0aHJvdygnSW52YWxpZENlbGxFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCh0aGlzLnBsYXllciA9PT0gJzEnID8gJ3BsYXllcjEnIDogJ3BsYXllcjInKTtcclxuICAgICAgICB0aGlzLmJvYXJkU3RhdHVzW2NlbGxJbmRleF0gPSB0aGlzLnBsYXllcjtcclxuICAgICAgICB0aGlzLmNoZWNrV2luKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hlY2tXaW4oKSB7XHJcblxyXG4gICAgICAgIGxldCB2aWN0b3J5ID0gZmFsc2UsXHJcbiAgICAgICAgICAgIGRyYXcgPSBmYWxzZSxcclxuICAgICAgICAgICAgd2lubmluZ0NvbmRpdGlvbnNMZW5ndGggPSB0aGlzLndpbm5pbmdDb25kaXRpb25zLmxlbmd0aCxcclxuICAgICAgICAgICAgd2lubmluZ0NvbmRpdGlvbiA9IG51bGw7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2lubmluZ0NvbmRpdGlvbnNMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB3aW5uaW5nQ29uZGl0aW9uID0gdGhpcy53aW5uaW5nQ29uZGl0aW9uc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGxldCB0ZXN0ID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuYm9hcmRTaXplOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHRlc3QucHVzaCh0aGlzLmJvYXJkU3RhdHVzW3dpbm5pbmdDb25kaXRpb25bal1dKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRlc3Quc29tZShlbGVtID0+IHtyZXR1cm4gZWxlbSA9PT0gJyc7fSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGVzdC5ldmVyeShlbGVtID0+IGVsZW0gPT09IHRlc3RbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICB2aWN0b3J5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKiBcclxuICAgICAgICAgICAgbGV0IGNlbGwxID0gdGhpcy5ib2FyZFN0YXR1c1t3aW5uaW5nQ29uZGl0aW9uWzBdXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDIgPSB0aGlzLmJvYXJkU3RhdHVzW3dpbm5pbmdDb25kaXRpb25bMV1dLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsMyA9IHRoaXMuYm9hcmRTdGF0dXNbd2lubmluZ0NvbmRpdGlvblsyXV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsMSA9PT0gJycgfHwgY2VsbDIgPT09ICcnIHx8IGNlbGwzID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjZWxsMSA9PT0gY2VsbDIgJiYgY2VsbDIgPT09IGNlbGwzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpY3RvcnkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAodmljdG9yeSkge1xyXG4gICAgICAgICAgICAvLyBoaWdobGlnaHQgbGluZVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYm9hcmRTaXplOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBjZWxsSWQgPSB3aW5uaW5nQ29uZGl0aW9uW2ldLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvYXJkQ2VsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNlbGwtaWQ9XCIke2NlbGxJZH1cIl1gKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYm9hcmRDZWxsLmNsYXNzTGlzdC5hZGQoYHBsYXllciR7dGhpcy5wbGF5ZXJ9V2luYCwgJ3dpbm5pbmctY2VsbCcpO1xyXG4gICAgICAgICAgICAgICAgYm9hcmRDZWxsLmNsYXNzTGlzdC5yZW1vdmUoYHBsYXllciR7dGhpcy5wbGF5ZXJ9YCk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN0YXJ0R2FtZSgpO1xyXG4gICAgICAgICAgICAgICAgfSwgNDAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLnJvdW5kV2luc0J5UGxheWVyWydwbGF5ZXInK3RoaXMucGxheWVyXSArPSAxO1xyXG4gICAgICAgICAgICAvLyBmaXJzdCBwbGF5ZXIgdG8gZ2V0IDUgcm91bmRzIGlzIHRoZSB3aW5uZXJcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJvdW5kV2luc0J5UGxheWVyLnBsYXllcjEgPT09IDUgfHwgdGhpcy5yb3VuZFdpbnNCeVBsYXllci5wbGF5ZXIyID09PSA1KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBkaXNwbGF5IGNvbmdyYXRzIG1lc3NhZ2UgYW5kIHNjcm9sbCB0byBuZXh0IHNlY3Rpb25cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYXJyaXZpbmcgaGVyZSBubyB2aWN0b3J5IGZvdW5kLiBpdCBpcyBhIGRyYXcgaWYgYWxsIGNlbGxzIGFyZSBmaWxsZWRcclxuICAgICAgICBkcmF3ID0gIXRoaXMuYm9hcmRTdGF0dXMuaW5jbHVkZXMoJycpO1xyXG4gICAgICAgIGlmIChkcmF3KSB7XHJcbiAgICAgICAgICAgIC8vIGNsZWFyIGJvYXJkIGFuZCBzdGFydCBhZ2FpblxyXG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRHYW1lKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubWFuYWdlUGxheWVyQ2hhbmdlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbWFuYWdlUGxheWVyQ2hhbmdlKCkge1xyXG4gICAgICAgIHRoaXMucGxheWVyID0gdGhpcy5wbGF5ZXIgPT09ICcxJyA/ICcyJyA6ICcxJztcclxuICAgICAgICBzdXBlci5oaWdobGlnaHRTZWxlY3RlZFBsYXllcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc3RhcnRHYW1lKCkge1xyXG4gICAgICAgIHRoaXMucGxheWVyID0gJzEnO1xyXG4gICAgICAgIHRoaXMuYm9hcmRTdGF0dXMuZmlsbCgnJyk7XHJcblxyXG4gICAgICAgIGxldCBib2FyZENlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZsZXgtaXRlbScpLFxyXG4gICAgICAgICAgICBib2FyZENlbGxzTGVuZ3RoID0gYm9hcmRDZWxscy5sZW5ndGgsXHJcbiAgICAgICAgICAgIGFwcGxpZWRDbGFzc2VzID0gWydwbGF5ZXIxJywgJ3BsYXllcjInLCAncGxheWVyMVdpbicsICdwbGF5ZXIyV2luJywgJ3dpbm5pbmctY2VsbCddO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvYXJkQ2VsbHNMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBib2FyZENlbGxzW2ldLmNsYXNzTGlzdC5yZW1vdmUoLi4uYXBwbGllZENsYXNzZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvaW5kZXguanNcIik7XG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvc2Fzcy9tYWluLnNjc3NcIik7XG4iXSwic291cmNlUm9vdCI6IiJ9